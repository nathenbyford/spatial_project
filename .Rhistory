geom_polygon(aes(fill = positive), color = "black") +
theme_void() +
scale_fill_distiller() +
labs(title = "Positive count", fill = "Count") +
theme(plot.title = element_text(hjust = .5))
testing_rate <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2) +
labs(title = "Testing rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
smoke <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Smoking), color = "black") +
theme_void() +
scale_fill_distiller(palette = 3) +
labs(title = "Smoking rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
obesity <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Obesity), color = "black") +
theme_void() +
scale_fill_distiller(palette = "Yl") +
labs(title = "Obesity rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
air_pol <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = AirPol), color = "black") +
theme_void() +
scale_fill_distiller(palette = 7) +
labs(title = "Air polution index", fill = "value") +
theme(plot.title = element_text(hjust = .5))
uninsured <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Uninsured), color = "black") +
theme_void() +
scale_fill_distiller(palette = 8) +
labs(title = "Uninsured rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
plot_grid(positive, testing_rate, smoke,
obesity, air_pol, uninsured)
plot_data <- data |>
select(
State,positive, totalTestResults, Pop,
Smoking, AirPol, Obesity, Uninsured
) |>
mutate(
test_rate = totalTestResults / Pop,
positive_perc = positive / totalTestResults,
State = str_to_lower(State)
) |>
rename(region = State)
plot_data <- left_join(US, plot_data)
positive <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = positive), color = "black") +
theme_void() +
scale_fill_distiller() +
labs(title = "Positive count", fill = "Count") +
theme(plot.title = element_text(hjust = .5))
testing_rate <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2) +
labs(title = "Testing rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
smoke <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Smoking), color = "black") +
theme_void() +
scale_fill_distiller(palette = 3) +
labs(title = "Smoking rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
obesity <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Obesity), color = "black") +
theme_void() +
scale_fill_distiller(palette = "Yellows") +
labs(title = "Obesity rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
air_pol <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = AirPol), color = "black") +
theme_void() +
scale_fill_distiller(palette = 7) +
labs(title = "Air polution index", fill = "value") +
theme(plot.title = element_text(hjust = .5))
uninsured <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Uninsured), color = "black") +
theme_void() +
scale_fill_distiller(palette = 8) +
labs(title = "Uninsured rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
plot_grid(positive, testing_rate, smoke,
obesity, air_pol, uninsured)
plot_data <- data |>
select(
State,positive, totalTestResults, Pop,
Smoking, AirPol, Obesity, Uninsured
) |>
mutate(
test_rate = totalTestResults / Pop,
positive_perc = positive / totalTestResults,
State = str_to_lower(State)
) |>
rename(region = State)
plot_data <- left_join(US, plot_data)
positive <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = positive), color = "black") +
theme_void() +
scale_fill_distiller() +
labs(title = "Positive count", fill = "Count") +
theme(plot.title = element_text(hjust = .5))
testing_rate <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2) +
labs(title = "Testing rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
smoke <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Smoking), color = "black") +
theme_void() +
scale_fill_distiller(palette = 3) +
labs(title = "Smoking rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
obesity <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Obesity), color = "black") +
theme_void() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Obesity rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
air_pol <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = AirPol), color = "black") +
theme_void() +
scale_fill_distiller(palette = 7) +
labs(title = "Air polution index", fill = "value") +
theme(plot.title = element_text(hjust = .5))
uninsured <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Uninsured), color = "black") +
theme_void() +
scale_fill_distiller(palette = 8) +
labs(title = "Uninsured rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
plot_grid(positive, testing_rate, smoke,
obesity, air_pol, uninsured)
plot_data <- data |>
select(
State,positive, totalTestResults, Pop,
Smoking, AirPol, Obesity, Uninsured
) |>
mutate(
test_rate = totalTestResults / Pop,
positive_perc = positive / totalTestResults,
State = str_to_lower(State)
) |>
rename(region = State)
plot_data <- left_join(US, plot_data)
positive <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = positive), color = "black") +
theme_void() +
scale_fill_distiller() +
labs(title = "Positive count", fill = "Count") +
theme(plot.title = element_text(hjust = .5))
testing_rate <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2) +
labs(title = "Testing rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
smoke <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Smoking), color = "black") +
theme_void() +
scale_fill_distiller(palette = 3) +
labs(title = "Smoking rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
obesity <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Obesity), color = "black") +
theme_void() +
scale_fill_distiller(palette = 7) +
labs(title = "Obesity rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
air_pol <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = AirPol), color = "black") +
theme_void() +
scale_fill_distiller(palette = 8) +
labs(title = "Air polution index", fill = "value") +
theme(plot.title = element_text(hjust = .5))
uninsured <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = Uninsured), color = "black") +
theme_void() +
scale_fill_distiller(palette = "Spectral") +
labs(title = "Uninsured rate", fill = "percent") +
theme(plot.title = element_text(hjust = .5))
plot_grid(positive, testing_rate, smoke,
obesity, air_pol, uninsured)
gtsummary::tbl_summary(data, by = State)
gtsummary::tbl_summary(data, by = Abbre)
data <- dat |>
mutate(pos_test_rate = positive / totalTestResults)
data
data$Excessive_Drinking |> max()
tbl_dat <- data |>
select(totalTestResults, positive, AirPol, Obesity, Smoking, Popdensity)
gtsummary::tbl_summary(data, by = Abbre)
tbl_dat <- data |>
select(totalTestResults, positive, AirPol, Obesity, Smoking, Popdensity, Abbre)
gtsummary::tbl_summary(tbl_dat, by = Abbre)
tbl_dat |>
summarise(by = Abbre)
tbl_dat |>
summarise(.by = Abbre)
tbl_dat
tbl_dat <- data |>
select(Abbre, totalTestResults, positive, AirPol, Obesity, Smoking, Popdensity)
tbl_dat
tbl_dat |>
gt::gt()
tbl_dat |>
gtsummary::tbl_summary()
tbl_dat <- data |>
select(totalTestResults, positive, AirPol, Obesity, Smoking, Popdensity)
tbl_dat |>
gtsummary::tbl_summary()
tbl_dat |>
gtsummary::tbl_summary() |>
gtsummary::bold_labels()
tbl_dat <- data |>
select(positive, totalTestResults, AirPol, Obesity, Smoking, Popdensity) |>
rename(
"Positive tests" = positive
)
tbl_dat |>
gtsummary::tbl_summary() |>
gtsummary::bold_labels()
tbl_dat <- data |>
select(positive, totalTestResults, AirPol, Obesity, Smoking, Popdensity) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Air Polution" = AirPol,
"Population Density" = Popdensity
)
tbl_dat |>
gtsummary::tbl_summary() |>
gtsummary::bold_labels()
library(gtsummary)
colnames(data)
tbl_dat <- data |>
select(positive, totalTestResults, AirPol, Popdensity, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_drinking
)
tbl_dat <- data |>
select(positive, totalTestResults, AirPol, Popdensity, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat |>
tbl_summary() |>
bold_labels() |>
modify_caption("Summary statistics for variables")
tbl_dat <- data |>
select(positive, totalTestResults, Popdensity, AirPol, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat |>
tbl_summary() |>
bold_labels() |>
modify_caption("Summary statistics for variables")
tbl_dat <- data |>
select(positive, totalTestResults, pos_test_rate, Popdensity, AirPol, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat |>
tbl_summary() |>
bold_labels() |>
modify_caption("Summary statistics for variables")
data <- dat |>
mutate(pos_test_rate = positive / totalTestResults,
test_rate = totalTestResults / Pop)
tbl_dat <- data |>
select(positive, totalTestResults, test_rate, Popdensity, AirPol, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat |>
tbl_summary() |>
bold_labels() |>
modify_caption("Summary statistics for variables")
tbl_dat <- data |>
select(positive, totalTestResults, test_rate, Popdensity, AirPol, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Testing Rate" = testing_rate,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat <- data |>
select(positive, totalTestResults, test_rate, Popdensity, AirPol, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Testing Rate" = testing_rate,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat <- data |>
select(positive, totalTestResults, test_rate, Popdensity, AirPol, Obesity, Smoking, Excessive_Drinking) |>
rename(
"Positive tests" = positive,
"Total tests" = totalTestResults,
"Testing Rate" = test_rate,
"Air Polution" = AirPol,
"Population Density" = Popdensity,
"Excessive Drinking" = Excessive_Drinking
)
tbl_dat |>
tbl_summary() |>
bold_labels() |>
modify_caption("Summary statistics for variables")
:::{.subtext}
dim(data)
data |>
ggplot(aes(x = positive)) +
geom_histogram()
data |>
ggplot(aes(x = positive)) +
geom_histogram(bins = 100)
data |>
ggplot(aes(x = positive)) +
geom_histogram(bins = 100) +
scale_x_continuous(labels = comma)
data |>
ggplot(aes(x = positive)) +
geom_histogram(bins = 100) +
scale_x_continuous(labels = scales::comma)
data |>
ggplot(aes(x = positive)) +
geom_histogram(aes(y = after_stat(density)), bins = 100) +
scale_x_continuous(labels = scales::comma)
data |>
ggplot(aes(x = positive)) +
geom_histogram(aes(y = after_stat(density)), bins = 100) +
scale_x_continuous(labels = scales::comma) +
labs(title = "Density of positive cases",
x = "cases")
data |>
ggplot(aes(x = positive)) +
geom_histogram(aes(y = after_stat(density)), bins = 100) +
geom_density() +
scale_x_continuous(labels = scales::comma) +
labs(title = "Density of positive cases",
x = "cases")
data |>
ggplot(aes(x = positive)) +
geom_histogram(aes(y = after_stat(density)), bins = 80) +
geom_density() +
scale_x_continuous(labels = scales::comma) +
labs(title = "Density of positive cases",
x = "cases")
data |>
ggplot(aes(x = positive)) +
geom_histogram(aes(y = after_stat(density)), bins = 50) +
geom_density() +
scale_x_continuous(labels = scales::comma) +
labs(title = "Density of positive cases",
x = "cases")
data |>
ggplot(aes(x = positive)) +
geom_histogram(aes(y = after_stat(density)), bins = 100) +
geom_density() +
scale_x_continuous(labels = scales::comma) +
labs(title = "Density of positive cases",
x = "cases")
load("covid.RData")
dat |> dim()
dat |> colnames()
data |>
select(positive, AirPol, Obesity, Drug_death, Excessive_Drinking,
Smoking, Uninsured, Popdensity, Pop) |>
pivot_longer(-positive)
data |>
select(positive, AirPol, Obesity, Drug_death, Excessive_Drinking,
Smoking, Uninsured, Popdensity, Pop) |>
pivot_longer(-positive) |>
ggplot(aes(x = value, y = positive)) +
geom_point() +
geom_smooth() +
facet_wrap(~name)
data |>
select(positive, AirPol, Obesity, Drug_death, Excessive_Drinking,
Smoking, Uninsured, Popdensity, Pop) |>
pivot_longer(-positive) |>
ggplot(aes(x = value, y = positive)) +
geom_point() +
geom_smooth() +
facet_wrap(~name, scales = "free_x")
#| include: false
library(tidyverse); theme_set(theme_bw())
library(cowplot)
library(gtsummary)
library(sp)
library(geoR)
library(gstat)
library(plotly)
load("covid.RData")
dat
dat$Date[1]
testing_rate <- plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate*100000), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2) +
labs(title = "Tests per 100k", fill = "count") +
theme(plot.title = element_text(hjust = .5))
plot_data <- data |>
select(
State,positive, totalTestResults, Pop,
Smoking, AirPol, Obesity, Uninsured
) |>
mutate(
test_rate = (totalTestResults / Pop) * 100,
positive_perc = positive / totalTestResults,
State = str_to_lower(State)
) |>
rename(region = State)
library(tidyverse); theme_set(theme_bw())
#| include: false
library(tidyverse); theme_set(theme_bw())
library(cowplot)
library(gtsummary)
library(sp)
library(geoR)
library(gstat)
library(plotly)
load("covid.RData")
#| include: false
US <- map_data("state")
data <- dat |>
mutate(pos_test_rate = positive / totalTestResults,
test_rate = totalTestResults / Pop)
dat <- dat |>
mutate(State = str_to_lower(State))
pos_count <- dat |> select(State, positive, Pop) |> rename(region = State)
map_counts <- left_join(US, pos_count)
plot_data <- data |>
select(
State,positive, totalTestResults, Pop,
Smoking, AirPol, Obesity, Uninsured
) |>
mutate(
test_rate = (totalTestResults / Pop) * 100,
positive_perc = positive / totalTestResults,
State = str_to_lower(State)
) |>
rename(region = State)
plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate*100000), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2, labels = scales::comma) +
labs(title = "Tests per 100k", fill = "count") +
theme(plot.title = element_text(hjust = .5))
plot_data
plot_data <- left_join(US, plot_data)
plot_data |>
ggplot(aes(x = long,  y = lat, group = group)) +
geom_polygon(aes(fill = test_rate*100000), color = "black") +
theme_void() +
scale_fill_distiller(palette = 2, labels = scales::comma) +
labs(title = "Tests per 100k", fill = "count") +
theme(plot.title = element_text(hjust = .5))
